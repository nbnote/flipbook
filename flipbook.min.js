/*!
 * Flipbook.js
 *
 * @version 1.1.4
 * @author Kazuhiro Shintani
 * @license MIT License (https://github.com/nbnote/flipbook/blob/master/LICENSE)
 * @link https://github.com/nbnote/flipbook
 */
;(function(f,g,h){var j=function(b,c,d){this._screen=typeof b==='string'?g.getElementById(b):b instanceof jQuery?b[0]:b;this._totalFrames=c===h?0:c;this._direction=d===h?0:d;this._frameLength=parseInt(this._getStyle(this._screen,this._direction===0?'width':'height'))||0;this._posList=null;this._timer=0;this._fps=30;this._speed=Math.floor(1000/this._fps);this._currentFrame=0;this._prevFrame=0;this._loop=true;this._isPlaying=false;this._isReverse=false;this.onLastFrame=function(a){};this.onFirstFrame=function(a){};this.onUpdate=function(a){};this._posList=this._makePosList(this._totalFrames,this._direction,this._frameLength);this.setFrame(0)};j.prototype={_getStyle:(function(){var d;if(g.documentElement.currentStyle){d=function(a,b){var c=b.replace(/-./g,function(m){return m.charAt(1).toUpperCase()});return a.currentStyle[c]}}else if(f.getComputedStyle){d=function(a,b){return g.defaultView.getComputedStyle(a,null).getPropertyValue(b)}}return d})(),_makePosList:function(a,b,c,d){d=d===h?0:d;var e=[];var i=0;if(b===0){for(;i<a;i++){e[i]={x:c*i*-1,y:d}}}else{for(;i<a;i++){e[i]={x:d,y:c*i*-1}}}return e},play:function(){var a=this;if(this._isPlaying&&!this._isReverse||this._totalFrames<2){return}this.pause();this._isPlaying=true;this._isReverse=false;this._timer=setInterval(function(){if(!a._loop&&a._currentFrame===a._totalFrames-1){a.pause()}else{a.setFrame(a._currentFrame+1)}},this._speed);this.setFrame(this._currentFrame+1)},replay:function(){this.stop();if(!this._isReverse){this.play()}else{this.reverse()}},reverse:function(){var a=this;if(this._isPlaying&&this._isReverse||this._totalFrames<2){return}this.pause();this._isPlaying=true;this._isReverse=true;this._timer=setInterval(function(){if(!a._loop&&a._currentFrame===0){a.pause()}else{a.setFrame(a._currentFrame-1)}},this._speed);this.setFrame(this._currentFrame-1)},pause:function(){if(!this._isPlaying)return;clearInterval(this._timer);this._isPlaying=false},stop:function(){this.pause();this.setFrame(0)},setFrame:function(a){this._prevFrame=this._currentFrame;var b=this._currentFrame=a>=this._totalFrames?0:a<0?this._totalFrames-1:a;var c=this._posList[b];this._screen.style.backgroundPosition='0px 0px';if(this._screen.style.backgroundPosition==='0px 0px'){this._screen.style.backgroundPosition=c.x+'px '+c.y+'px'}else{this._screen.style.backgroundPositionX=c.x+'px';this._screen.style.backgroundPositionY=c.y+'px'}this.onUpdate({type:'update',frameNumber:b});if(b===0){this.onFirstFrame({type:'first_frame',frameNumber:b})}else if(b===this._totalFrames-1){this.onLastFrame({type:'last_frame',frameNumber:b})}},setPos:function(a){this._posList=this._makePosList(this._totalFrames,this._direction,this._frameLength,a);this.setFrame(this._currentFrame)},getSpeed:function(){return this._speed},setSpeed:function(a){this._speed=a;this._fps=Math.floor(1000/a)},getFPS:function(){return this._fps},setFPS:function(a){this._fps=a;this._speed=Math.floor(1000/a)},getLoop:function(){return this._loop},setLoop:function(a){this._loop=a},getCurrentFrame:function(){return this._currentFrame},getTotalFrames:function(){return this._totalFrames},setTotalFrames:function(a){this._totalFrames=a},isPlaying:function(){return this._isPlaying},isReverse:function(){return this._isReverse},isLoaded:function(){return this._isLoaded}};f.Flipbook=j}(window,document));
